# tableau-practice-questions1124

#### 練習問題11

あるホテルの予約情報を含むデータから、ホテルの種類ごとに到着月別の宿泊率を比較するビジュアル表現を作成しましょう。  

・「Arrival Date Month」（到着月）ごとに、宿泊率を100%帯グラフで表示  
・宿泊率は、「Is Canceled」（キャンセルしたか）を使用して、「キャンセルしなかった割合」として計算  
・「Hotel」（ホテルの種類）ごとに表示  

##### 解答

1. まず、棒グラフを作成します。表を参考にグラフを作成します。  

［列］	［Hotel］、［カウント（1.11_hotel_bookings.csv）］  
［行］	［Arrival Date Month］  
［マーク］カードの［色］	［Is Canceled］  

※練習問題2の 4. から 7. を参照 → ［Is Canceled］をメジャーからディメンションへ移動

2. 次に、100％積み上げグラフに変更します。［列］の［カウント（1.11_hotel_bookings.csv）］を右クリックし、［簡易表計算］→［合計に対する割合］をクリックします。  
3. ［列］の［カウント（1.11_hotel_bookings.csv）］を右クリックし、［次を使用して計算］→［Is Canceled］をクリックします。  
4. 横軸を非表示にします。［列］の［カウント（1.11_hotel_bookings.csv）］を右クリックし、［ヘッダーの表示］をクリックしてチェックを外します。
5. 宿泊とキャンセルを左右逆に配置します。画面の右側にある色の凡例で項目をドラッグし、キャンセルを下、宿泊を上にします。
6. ［マーク］カードの［色］＞［色の編集］をクリックして、色を変更します。この図では、キャンセルの色を変更の際に、［キャンセル］の文字をダブルクリックして白色を選択しています。
7. ［OK］をクリックして画面を閉じます
8. ［マーク］カードの［色］をクリックして、枠線の色を変更します。
10. 割合を棒の中に表示します。［列］の［カウント（1.11_hotel_bookings.csv）］を［Ctrl］キーを押しながら［マーク］カードの［ラベル］にドロップします。割合が表示されない場合は、ビューの表示領域が狭い可能性があります。［ビュー全体］を選んでビューのサイズを調整したり、棒の幅を広げてみてください。

##### ポイント

<疑問>  
ホテルCSVを列に置くと何故シティホテルとリゾートホテルに自動的で分かれたのか？    
→CSVの構造が解っていなかったから  

##### ファイルの構造を理解する方法  
✅ Tableauで「構造」を一瞬で把握する方法（実務で一番使う）  

🔹 方法①：データソース画面を見る（最重要）  

Tableau下部の👉 ［データソース］タブ  
ここで：列名一覧/データ型（文字・数値・日付）/サンプル値  
が一気に見えます。

🔹 方法②：ディメンションをフィルターに置く  

たとえば hotel をフィルターに置くと：  
☑ City Hotel  
☑ Resort Hotel  
→ この列は カテゴリ分類用 と即判断できます。 

🔹 方法③：件数を棒グラフにする  

hotel を列、件数 を行に置くだけで：  
→ データの偏り・構造が一瞬でわかります。

<img width="1305" height="821" alt="スクリーンショット 2026-01-22 115105" src="https://github.com/user-attachments/assets/733786a4-2877-40af-bada-62ea13ed8dc9" />


#### 練習問題12

曲ごとに集計されたSpotifyのデータを使用し、ブルースとヒップホップの音楽ジャンルについて、人気スコアの分布を比較する次のようなビジュアル表現を作成しましょう。  

・「Popularity」（人気スコア）の割合の分布をエリアチャートで表示  
・「Popularity」は5%ごとにビンで集計  
・「blues」（ブルース）と「hiphop」（ヒップホップ）の各チャートを重ねて表示  

##### 解答

1. まず、2 つのデータを縦に組み合わせて 1 つのデータにします。
　フォルダ「1.12_music」にある［1.12_blues_music.csv］に接続します。  

2. 左側のペインから［1.12_hiphop_music.csv］をキャンバスの  
　［1.12_blues_music.csv］の下にドラッグし、［ユニオン］が表示されたらドロップします。  

3. ファイル名から音楽種類の文字を抜き出します。データグリッドの右端にある［テーブル名］を右クリックし、［分割］をクリックします。この［テーブル名］フィールドは、ユニオンしたことで自動的に追加されました。  

4. ［テーブル名－分割済み 1］のフィールド名をダブルクリックして、
　「ジャンル」に名前を変更します。  

5. Popularity を 5 ずつにビンでまとめます。［シート］に移動し、［データ］ペインの［Popularity］を右クリックし、［作成］→［ビン］をクリックします。  

6. ［ビンのサイズ］に「5」を入力します。  

7. ［OK］をクリックして画面を閉じます。  

［列］：［Popularity（ビン）］  
［行］：［カウント（1.12_blues_music.csv）］  
［マーク］タイプ：［エリア］  
［マーク］カードの［色］：［ジャンル］  

8. 表を参考にビューを作成します。  

9. 次に、割合に変更します。［行］の［カウント（1.12_blues_music.csv）］を右クリックし、［簡易表計算］→［合計に対する割合］をクリックします。    

10. ジャンルごとに 100％ とした割合を計算するため、計算する範囲を変更します。［行］の［カウント（1.12_blues_music.csv）］を右クリックし、［次を使用して計算］→［Popularity（ビン）］をクリックします。  

11. 2 つのジャンルの積み上げを解除します。メニューバーから［分析］→［スタックマーク］→［オフ］をクリックします。  



   
